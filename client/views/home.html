<div class="row">
	<div class="col-sm-3">
		<div class="panel panel-default" ng-repeat="u in users">
			<div class="panel-heading">
				<h3 class="panel-title">{{u.name}}</h3>
			</div>

			<div class="panel-body">
				<a ng-href="{{u.url}}">{{u.url}}</a>
			</div>

			<table class="table">
				<tr ng-repeat="d in u.debts | filter:{ name: '!' + u.name } | orderBy:'name'">
					<td>{{d.name}}</td>
					<td class="text-right text-{{d.amount > 0.005 ? 'danger' : 'success'}}">
						<strong>{{d.amount | number:2}}</strong>
					</td>
				</tr>
			</table>
		</div>
	</div>

	<div class="col-sm-9">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title">Transactions</h3>
			</div>

			<div class="panel-body">
				<a href="#!/transaction/0">Create transaction</a>
			</div>

			<table class="table">
				<th>Date</th>
				<th>Description</th>
				<th>Cost ($)</th>
				<th>Paid By</th>
				<th>Paid For</th>
				<th></th>
				<th></th>

				<tbody ng-repeat="t in transactions | orderBy:'date'">
					<tr>
						<td>{{t.date | date:'shortDate'}}</td>
						<td>{{t.description}}</td>
						<td class="text-right">{{t.cost | number:2}}</td>
						<td>{{users[t.creditor_id].short_name}}</td>
						<td>
							<div ng-repeat="id in t.debtors">{{users[id].short_name}}</div>
						</td>
						<td class="text-center">
							<a class="button-icon" ng-href="#!/transaction/{{t.id}}">
								<span class="glyphicon glyphicon-pencil"></span>
							</a>
						</td>
						<td class="text-center">
							<span class="button-icon" ng-click="deleteTransaction(t)">&times;</span>
						</td>
					</tr>

					<tr ng-repeat="sub in t.sub_items">
						<td></td>
						<td>{{sub.description}}</td>
						<td class="text-right">{{sub.cost | number:2}}</td>
						<td></td>
						<td>
							<div ng-repeat="id in sub.debtors">{{users[id].short_name}}</div>
						</td>
						<td></td>
						<td></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
